<div class="estadisticas-container">
    <div class="page-header">
      <div>
        <h1>Estadísticas de Disciplina</h1>
        <p class="subtitle">Analiza el comportamiento disciplinario de jugadores y equipos a lo largo del torneo.</p>
      </div>
      <button type="button" class="btn-export">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
          <polyline points="7 10 12 15 17 10"></polyline>
          <line x1="12" y1="15" x2="12" y2="3"></line>
        </svg>
        Exportar
      </button>
    </div>
  
    <div class="content-grid">
      <!-- MÁS TARJETAS AMARILLAS -->
      <div class="card">
        <h3>Más Tarjetas Amarillas</h3>
        <div class="players-list">
          @for (jugador of masAmarillas(); track $index) {
            <div class="player-item">
              <div class="player-rank">{{ $index + 1 }}</div>
              <div class="player-avatar">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                  <circle cx="12" cy="7" r="4"></circle>
                </svg>
              </div>
              <div class="player-details">
                <div class="player-name">{{ jugador.nombre }}</div>
                <div class="player-team">{{ jugador.equipo }}</div>
              </div>
              <div class="player-stat yellow">{{ jugador.amarillas }}</div>
            </div>
          }
        </div>
      </div>
  
      <!-- MÁS TARJETAS ROJAS -->
      <div class="card">
        <h3>Más Tarjetas Rojas</h3>
        <div class="players-list">
          @for (jugador of masRojas(); track $index) {
            <div class="player-item">
              <div class="player-rank">{{ $index + 1 }}</div>
              <div class="player-avatar">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                  <circle cx="12" cy="7" r="4"></circle>
                </svg>
              </div>
              <div class="player-details">
                <div class="player-name">{{ jugador.nombre }}</div>
                <div class="player-team">{{ jugador.equipo }}</div>
              </div>
              <div class="player-stat red">{{ jugador.rojas }}</div>
            </div>
          }
        </div>
      </div>
    </div>
  
    <!-- DISCIPLINA POR EQUIPO -->
    <div class="card-full">
      <h3>Disciplina por Equipo (Juego Limpio)</h3>
      <div class="table-wrapper">
        <table class="tabla">
          <thead>
            <tr>
              <th>Equipo</th>
              <th>Amarillas</th>
              <th>Rojas</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody>
            @for (equipo of disciplinaPorEquipo(); track $index) {
              <tr>
                <td>
                  <div class="equipo-cell">
                    <span class="equipo-nombre">{{ equipo.equipo }}</span>
                    @if (equipo.badge) {
                      <span class="badge-limpio">{{ equipo.badge }}</span>
                    }
                  </div>
                </td>
                <td><span class="tarjeta-count yellow">{{ equipo.amarillas }}</span></td>
                <td><span class="tarjeta-count red">{{ equipo.rojas }}</span></td>
                <td><strong>{{ equipo.total }}</strong></td>
              </tr>
            }
          </tbody>
        </table>
      </div>
    </div>
  
    <!-- TARJETAS POR JORNADA -->
    <div class="card-full">
      <h3>Tarjetas por Jornada</h3>
      <div class="chart-container">
        <div class="chart-bars">
          @for (jornada of tarjetasPorJornada(); track jornada.jornada) {
            <div class="chart-group">
              <div class="bars-wrapper">
                <div class="bar yellow" [style.height.%]="getBarHeight(jornada.amarillas, getMaxValue(tarjetasPorJornada()))" [title]="jornada.amarillas + ' amarillas'"></div>
                <div class="bar red" [style.height.%]="getBarHeight(jornada.rojas, getMaxValue(tarjetasPorJornada()))" [title]="jornada.rojas + ' rojas'"></div>
              </div>
              <div class="chart-label">Jornada {{ jornada.jornada }}</div>
            </div>
          }
        </div>
        <div class="chart-legend">
          <div class="legend-item">
            <span class="legend-color yellow"></span>
            <span>Amarillas</span>
          </div>
          <div class="legend-item">
            <span class="legend-color red"></span>
            <span>Rojas</span>
          </div>
        </div>
      </div>
    </div>
  </div>