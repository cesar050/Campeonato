<div class="tabla-container">
    <div class="page-header">
      <h1>Tabla de Posiciones</h1>
      <div class="header-actions">
        <button type="button" class="btn-action" (click)="descargarPDF()">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
            <polyline points="14 2 14 8 20 8"></polyline>
          </svg>
          Descargar PDF
        </button>
        <button type="button" class="btn-action" (click)="descargarExcel()">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          </svg>
          Descargar Excel
        </button>
        <button type="button" class="btn-share" (click)="compartirEnlace()">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path>
            <polyline points="16 6 12 2 8 6"></polyline>
            <line x1="12" y1="2" x2="12" y2="15"></line>
          </svg>
          Compartir Enlace
        </button>
      </div>
    </div>
  
    <div class="filters-card">
      <div class="filter-group">
        <label>Ver tabla al</label>
        <input type="date" [(ngModel)]="selectedDate" class="date-input">
      </div>
      <div class="filter-group">
        <label>Jornada</label>
        <select [(ngModel)]="selectedJornada" class="select-input">
          <option>Jornada 12</option>
          <option>Jornada 11</option>
          <option>Jornada 10</option>
        </select>
      </div>
      <div class="ultima-actualizacion">
        <span>Última actualización: 14 de Agosto, 2024 10:30 AM</span>
      </div>
    </div>
  
    @if (isLoading()) {
      <div class="loading">
        <div class="spinner"></div>
        <p>Cargando tabla...</p>
      </div>
    } @else {
      <div class="tabla-card">
        <div class="tabla-wrapper">
          <table class="tabla">
            <thead>
              <tr>
                <th class="col-pos">#</th>
                <th class="col-equipo">EQUIPO</th>
                <th class="col-cambio">CAMBIO</th>
                <th>PJ</th>
                <th>PG</th>
                <th>PE</th>
                <th>PP</th>
                <th>GF</th>
                <th>GC</th>
                <th>DG</th>
                <th class="col-pts">PTS</th>
                <th class="col-forma">FORMA</th>
              </tr>
            </thead>
            <tbody>
              @for (equipo of equipos(); track equipo.posicion) {
                <tr [class]="getZonaClass(equipo.posicion)">
                  <td class="col-pos">
                    <span class="posicion">{{ equipo.posicion }}</span>
                  </td>
                  <td class="col-equipo">
                    <div class="equipo-info">
                      <div class="equipo-logo">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path>
                        </svg>
                      </div>
                      <span class="equipo-nombre">{{ equipo.nombre }}</span>
                    </div>
                  </td>
                  <td class="col-cambio">
                    <div class="cambio-indicator" [class]="'cambio-' + equipo.cambio" [innerHTML]="getCambioIcon(equipo.cambio)"></div>
                  </td>
                  <td>{{ equipo.pj }}</td>
                  <td>{{ equipo.pg }}</td>
                  <td>{{ equipo.pe }}</td>
                  <td>{{ equipo.pp }}</td>
                  <td>{{ equipo.gf }}</td>
                  <td>{{ equipo.gc }}</td>
                  <td>
                    <span [class]="equipo.dif >= 0 ? 'dif-positive' : 'dif-negative'">
                      {{ equipo.dif >= 0 ? '+' : '' }}{{ equipo.dif }}
                    </span>
                  </td>
                  <td class="col-pts">
                    <strong>{{ equipo.pts }}</strong>
                  </td>
                  <td class="col-forma">
                    <div class="forma-list">
                      @for (resultado of equipo.forma; track $index) {
                        <span class="forma-badge" [class]="getFormaClass(resultado)">{{ resultado }}</span>
                      }
                    </div>
                  </td>
                </tr>
              }
            </tbody>
          </table>
        </div>
  
        <div class="leyenda">
          <div class="leyenda-item">
            <span class="leyenda-color zona-champions"></span>
            <span>Champions League</span>
          </div>
          <div class="leyenda-item">
            <span class="leyenda-color zona-europa"></span>
            <span>Europa League</span>
          </div>
          <div class="leyenda-item">
            <span class="leyenda-color zona-descenso"></span>
            <span>Descenso</span>
          </div>
        </div>
      </div>
    }
  </div>