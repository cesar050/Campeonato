<div class="unlock-container">
  <div class="unlock-card">
    <div class="unlock-header">
      <div class="logo">üîì</div>
      <h1>Desbloquear cuenta</h1>
      <p>Ingresa el c√≥digo de 6 d√≠gitos enviado a tu email</p>
    </div>

    <!-- Mensaje de √©xito -->
    @if (successMessage()) {
      <div class="alert alert-success">
        <div class="alert-icon">‚úÖ</div>
        <div class="alert-content">
          <strong>{{ successMessage() }}</strong>
          <p>Redirigiendo al inicio de sesi√≥n...</p>
        </div>
      </div>
    }

    <!-- Mensaje de error -->
    @if (errorMessage()) {
      <div class="alert alert-error">
        <span>{{ errorMessage() }}</span>
      </div>
    }

    @if (!successMessage()) {
      <form [formGroup]="unlockForm" (ngSubmit)="onSubmit()">
        <!-- Email -->
        <div class="form-group">
          <label for="email">Correo electr√≥nico</label>
          <div class="input-wrapper">
            <input
              type="email"
              id="email"
              formControlName="email"
              placeholder="tucorreo@gmail.com"
              [class.invalid]="emailInvalid"
              autocomplete="email"
            />
            <span class="input-icon">üìß</span>
          </div>
          @if (emailInvalid) {
            <span class="error-text">Ingresa un email v√°lido</span>
          }
        </div>

        <!-- C√≥digo de desbloqueo -->
        <div class="form-group">
          <label for="unlock_code">C√≥digo de desbloqueo</label>
          <div class="input-wrapper code-input">
            <input
              type="text"
              id="unlock_code"
              formControlName="unlock_code"
              placeholder="000000"
              [class.invalid]="codeInvalid"
              (input)="onCodeInput($event)"
              maxlength="6"
              autocomplete="one-time-code"
            />
            <span class="input-icon">üîë</span>
          </div>
          @if (codeInvalid) {
            <span class="error-text">
              @if (unlockForm.get('unlock_code')?.hasError('required')) {
                El c√≥digo es requerido
              } @else {
                Debe ser un c√≥digo de 6 d√≠gitos
              }
            </span>
          }
        </div>

        <button
          type="submit"
          class="btn-primary"
          [disabled]="isLoading()"
        >
          @if (isLoading()) {
            <span class="spinner"></span>
            Verificando...
          } @else {
            Desbloquear cuenta
          }
        </button>
      </form>
    }

    <div class="unlock-footer">
      <p><a routerLink="/auth/login">‚Üê Volver al inicio de sesi√≥n</a></p>
    </div>
  </div>
</div>
